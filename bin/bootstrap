#!/usr/bin/env ruby

# sync output
$stdout.sync = true

$:.unshift File.expand_path("../../lib", __FILE__)
require "language_pack"
require "language_pack/shell_helpers"

DEFAULT_STACK = "cedar-14"

LanguagePack::ShellHelpers.initialize_env(ARGV[0])
include LanguagePack::ShellHelpers
bootstrap_ruby_dir = Dir.mktmpdir
installer = LanguagePack::Installers::MriInstaller.new(env("STACK") || DEFAULT_STACK)
installer.fetch_unpack(LanguagePack::RubyVersion.new("ruby-#{LanguagePack::RubyVersion::DEFAULT_VERSION_NUMBER}"), bootstrap_ruby_dir)
print bootstrap_ruby_dir
